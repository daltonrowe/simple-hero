<%= render SectionHeaderComponent.new(text: @team.name, badge: @team.user == Current.user ? 'Owner' : nil) %>

<% if @team.pending_seats.any? %>
<section class="flex flex-col gap-2">
  <h2 class="font-bold text-2xl">Pending Seats</h2>
  <%= render PendingSeatComponent.with_collection(@team.pending_seats, user: Current.user) %>
</section>
<% end %>

<section class="flex flex-col gap-2">
  <h2 class="font-bold text-2xl">Team Seats</h2>
  <%= render SeatComponent.with_collection(@team.seats, show: :email, action: "Remove") %>
  <%= render EmptySectionNoticeComponent.new(text: 'Your team has no members, invite them below.') if @team.seats.empty? %>
</section>

<section class="flex flex-col gap-2">
  <h2 class="font-bold text-2xl">Add New Seats</h2>

  <%= form_for :pending_seat, url: team_pending_seats_path(team_id: @team.guid), class:'flex gap-2' do |form| %>
    <%= form.text_field :pending_emails, placeholder: 'member1@mydomain.com, member2@mydomain.com', class: "block shadow-sm rounded-md border border-gray-400 focus:outline-solid focus:outline-blue-600 px-3 py-2  w-full" %>
    <%= render ButtonComponent.new(text: 'Send Invites', type: :submit, extra_classes: ['shrink-0'])%>
  <% end %>
</section>

<section class="flex flex-col gap-4">
  <h2 class="font-bold text-2xl">Team Settings</h2>

  <%= form_for @team, url: team_path(@team.guid), method: :patch, html: { class: "flex flex-col gap-4" } do |form| %>
    <fieldset class="flex flex-col gap-4">
      <h3 class="fold-bold text-xl">Status Sections</h3>

      <%# TODO: Fix section name editing %>
      <%# TODO: Add description field %>
      <% @team.sections.each_with_index do |section, index| %>
      <% section %>
        <%= form.text_field "section_#{index}[name]", value: section, class: "block shadow-sm rounded-md border border-gray-400 focus:outline-solid focus:outline-blue-600 px-3 py-2  w-full" %>
      <% end %>
    </fieldset>

    <fieldset class="flex flex-col gap-4">
      <h3 class="fold-bold text-xl">Notifactions</h3>

      <div>
        <%# TODO: Allow enable / disabled of notifaction %>
        <span class="inline-block w-35">Notifaction Time</span>
        <%= form.time_select :notifaction_time, :ignore_date => true, value: @team.notifaction_time %>
      </div>

      <div>
        <span class="inline-block w-35">End of Day</span>
        <%= form.time_select :end_of_day, :ignore_date => true, value: @team.end_of_day %>
      </div>

      <%# include time zone select %>

      <input type="text" name="metadata[slack_webhook]" class="block shadow-sm rounded-md border border-gray-400 focus:outline-solid focus:outline-blue-600 px-3 py-2  w-full" placeholder="https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX">
    </fieldset>
    
    <%= render ButtonComponent.new(text: 'Update Settings', type: :submit) %>
  <% end %>

</section>